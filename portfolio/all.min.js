"use strict";var portfolio=angular.module("portfolio",[]);portfolio.factory("landingService",["$q",function(t){var e=t.defer(),n=t.defer(),i=[e.promise,n.promise],r=t.defer();return{animatedB:function(){return e.resolve()},createdSquares:function(){return n.resolve()},canAnimateSquares:function(){return t.all(i)},animatedSquares:function(){return r.resolve()},canAnimateCard:function(){return r.promise}}}]),portfolio.controller("PortfolioController",["$scope",function(t){var e=this,n=moment("1993-08-24 00:00").startOf("minute");this.ageyears=moment().diff(n,"years"),this.agemonths=moment().subtract(this.ageyears,"years").diff(n,"months"),this.ageseconds=moment().subtract(this.ageyears,"years").subtract(this.agemonths,"months").diff(n,"seconds"),setInterval(function(){return t.$apply(function(){return e.ageseconds++})},1e3),this.initialScroll=function(){var t=0;t=$("#intro").offset().top-120+$("#intro")[0].offsetHeight-$(window).height()>$("#intro").offset().top?$("#intro").offset().top-120:$("#intro").offset().top+$("#intro")[0].offsetHeight-$(window).height(),$("html, body").stop().animate({scrollTop:t},800)}}]),portfolio.directive("animejsBanner",["$q","landingService",function(t,e){return{restrict:"AE",templateUrl:"js/directives/animejs-banner/animejs-banner.html",link:function(t,n,i,r){n[0].querySelector("#loading-squares");anime({targets:"#Bsvg path",strokeDashoffset:{easing:"easeInOutExpo",duration:500,value:function(t){var e=t.getTotalLength();return t.setAttribute("stroke-dasharray",e),[-e,0]}},stroke:{value:function(t,e){return"rgb("+2*e+","+8*e+","+12*e+")"},easing:"linear",duration:222},strokeWidth:{value:8,easing:"linear",delay:function(t,e){return 600+8*e},duration:222},delay:function(t,e){return 30*e},duration:1200,easing:"easeOutExpo",loop:!1,direction:"alternate",update:function(t){1==t.reversed&&e.animatedB()},complete:function(){}});var a,o,s,l,u,c,d=n[0].querySelector("#squares");a=o=s=l=0;var h=Math.min(Math.ceil(n.height()/3.8),122);u=c=h;do d.innerHTML+='\n\t\t\t\t\t\t\t\t\t\t\t\t<article style="width:'+u+"px;height:"+c+"px;top:"+o+"px;right:"+a+'px">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div></div>\n\t\t\t\t\t\t\t\t\t\t\t\t</article>\n\t\t\t\t\t\t\t\t\t\t\t',a<u||o>n.height()-c?(s<n.width()?s+=u:l+=c,o=l,a=s):(a-=u,o+=c);while(a<n.width()||o<n.height());$("#squares").css("display","block"),e.createdSquares(),e.canAnimateSquares().then(function(){anime({targets:"#squares div",rotate:{value:180,duration:888,easing:"easeInOutQuad"},scale:{value:[0,1],duration:888,easing:"easeInOutExpo"},loop:!1,direction:"normal",borderRadius:{value:0,duration:1222,easing:"easeInOutCirc"},backgroundColor:"#18212D",delay:function(t,e,n){var i=888;return e*(i/n)},complete:function(){d.className+="bg-dark",e.animatedSquares()}})})}}}]),portfolio.directive("bubbleGradient",[function(){return{restrict:"AE",link:function(t,e,n,i){var r=$('<canvas id="bubble-gradient" width="'+e.width()+'" height="'+e.height()+'"></canvas>').css({"z-index":0,position:"absolute"});e.append(r),console.log(t,e,this);var a=document.querySelector("#bubble-gradient"),o=a.getContext("2d"),s=a.width,l=a.height;o.clearRect(0,0,s,l),o.fillStyle="#EEEEEE",o.fillRect(0,0,s,l);var u=function(t,e,n){this.x=t,this.y=e,this.radius=0,this.angle=0,this.full=n};u.prototype.grow=function(){return o.beginPath(),this.radius=this.full*Math.abs(Math.sin(this.angle)),o.arc(s-this.x,this.y,this.radius,0,2*Math.PI,!1),o.closePath(),o.fillStyle="#006699",o.fill(),this.angle+=.01,!(this.radius<this.full)};var c,d,h,f,g,m,p;c=d=h=f=0,g=10,m=l/5,p=l/5;var v=setInterval(function(){var t=new u(c,d,s/5),e=setInterval(function(){t.grow()&&clearInterval(e)},1);c>=s&&d>=l?(console.log("stopping"),clearInterval(v)):c<=0||d>=l?(h<s?(m-=5,h+=m):f+=p,d=f,c=h):(c-=m,d+=p)},g)}}}]),portfolio.directive("landingCard",["landingService",function(t){return{restrict:"AE",templateUrl:"js/directives/landing-card/landing-card.html",link:function(e,n,i,r){t.canAnimateCard().then(function(){console.log("finished animating squares, so now animate the card")})}}}]);