"use strict";function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var portfolio=angular.module("portfolio",["ngAnimate","ngSanitize","mobile-angular-ui","mobile-angular-ui.gestures.drag","mobile-angular-ui.gestures.touch","ngAnimate","ngSanitize","duScroll"]).filter("byCategories",function(){return function(e,t){return void 0===t||0==t.length?e:e.filter(function(e){if(e.categories.some(function(e){return t.indexOf(e)>-1}))return e})}}).filter("byExperience",function(){return function(e,t,n){return e.filter(function(e){if(t||(t=0),n||(n=99),e.experience>=t&&e.experience<=n)return e})}}).value("duScrollOffset",88);portfolio.factory("landingService",["$q",function(e){var t=e.defer(),n=e.defer(),o=e.defer(),i=([n.promise,o.promise],e.defer(),e.defer()),r=e.defer();return{renderedBox:function(){return t.resolve()},canShowBox:function(){return t.promise},animatedB:function(){return n.resolve()},canAnimateExplosion:function(){return n.promise},animatedExplosion:function(){return i.resolve()},canAnimateCard:function(){return i.promise},animatedCard:function(){return r.resolve()},canAnimateControls:function(){return r.promise}}}]),portfolio.factory("projectsService",["$q","$http","$rootScope","landingService","$timeout",function(e,t,n,o,i){o.canAnimateCard().then(function(){i(function(){t.get("resources/json/projects.json").then(function(e){n.projects=e.data})},888)});var r=0,a=null;return{cardCount:function(){return r},activeCard:function(){return a},addCard:function(){var e=r++;return a=1===r?e:a,e},next:function(){a=a||0,a=a===r-1?0:a+1},prev:function(){a=a||0,a=0===a?r-1:a-1},cardSpreadInterval:function l(){var l=.05*document.querySelector(".cards-inner").clientHeight/(r-1);if(r>0)return l}}}]),portfolio.factory("skillzService",["$http","$rootScope","landingService","$timeout","$q",function(e,t,n,o){return t.dummySkillzCategoriesList=[],e.get("resources/json/skillz.json").then(function(e){var n;t.skillz=e.data;for(var o=e.data.length-1;o>=0;o--)t.dummySkillzCategoriesList.push(e.data[o].categories);console.log(t.dummySkillzCategoriesList),t.dummySkillzCategoriesList=[].concat(_toConsumableArray(new Set((n=[]).concat.apply(n,_toConsumableArray(t.dummySkillzCategoriesList))))),console.log(t.dummySkillzCategoriesList)}),{dummySkillzCategoriesList:function(){}}}]),portfolio.controller("BoxController",["$scope","landingService",function(e,t){var n=this;e.shown="front",t.canAnimateCard().then(function(){document.querySelector(".front.shown").classList+=" bg-dark"});var o=Math.max(document.documentElement.clientWidth,window.innerWidth||0)-4,i=Math.max(document.documentElement.clientHeight,window.innerHeight||0)-4,r=document.getElementById("box-container").style;r.width=o+"px",r.height=i+"px";var a=o/2+"px",l=document.getElementById("box");l.style.transform="translateZ(-"+a+") rotateY(0deg)";var c=["front","right","back","left"];this.sides=c;for(var s=c.length-1;s>=0;s--){var u;switch(c[s]){case"front":u="0deg";break;case"right":u="90deg";break;case"back":u="180deg";break;case"left":u="-90deg"}var d=document.querySelector("#box ."+c[s]);d.style.transform="rotateY("+u+") translateZ("+a+")",d.style.width=o+"px",d.style.height=i+"px"}t.renderedBox(),n.showSide=function(t){document.querySelector("#side-controls a:last-child").style.animationName="none";var n=document.querySelector("#side-controls a:first-child"),o=document.querySelector("#side-controls a:last-child");n.style.opacity="1",o.style.opacity="1";var i;switch(t){case"front":n.style.opacity=0,i="0deg";break;case"right":i="-90deg";break;case"back":i="-180deg";break;case"left":o.style.opacity=0,i="-270deg"}e.shown=t,l.style.transform="translateZ(-"+a+") rotateY("+i+")"}}]),portfolio.controller("PortfolioController",["$scope","$http","$window","$timeout","projectsService","landingService","skillzService","$location","$anchorScroll","$document","$rootScope",function(e,t,n,o,i,r,a,l,c,s,u){e.showLandingContent=!1,e.scrollable="unscrollable",this.scrollableToggle=function(t){e.scrollable=t?"scrollable":"unscrollable"},this.closeActionMenu=function(){e.actionMenuOpened=!1,document.querySelector("#action-button input").checked=!1,document.getElementById("box-container").classList.remove("open-menu-blur"),document.querySelector("#side-controls a:first-child").style.left=0,document.querySelector("#side-controls a:last-child").style.right=0},e.actionMenuOpened=!1,e.skillzOrderProperty="projects.length",e.reverse=!1,e.skillzFilterCategories=[],e.toggleCategoryFilter=function(t){e.skillzFilterCategories.indexOf(t)>-1?e.skillzFilterCategories.splice(e.skillzFilterCategories.indexOf(t),1):e.skillzFilterCategories.push(t)},e.skillzFilterExperienceMin=0,e.skillzFilterExperienceMax=99}]),portfolio.directive("actionMenuButton",["$timeout",function(e){return{controller:"PortfolioController",link:function(t,n,o,i){var r=document.getElementById("box-container");n.bind("click",function(){e(function(){i.actionMenuOpened=!!n[0].querySelector("input").checked,i.actionMenuOpened?(r.classList.contains("open-menu-blur")||(r.classList.add("open-menu-blur"),n[0].classList.add("open")),document.querySelector("#side-controls a:first-child").style.left="-88vw",document.querySelector("#side-controls a:last-child").style.right="-88vw"):i.actionMenuOpened||(r.classList.contains("open-menu-blur")&&(r.classList.remove("open-menu-blur"),n[0].classList.remove("open")),document.querySelector("#side-controls a:first-child").style.left=0,document.querySelector("#side-controls a:last-child").style.right=0)})})}}}]),portfolio.directive("actionMenuItemButton",["$timeout",function(e){return{link:function(t,n,o){n.bind("click",function(){e(function(){t.actionMenuOpened=!1})})}}}]),portfolio.directive("bubbleGradient",[function(){return{restrict:"AE",link:function(e,t,n,o){var i=$('<canvas id="bubble-gradient" width="'+t.width()+'" height="'+t.height()+'"></canvas>').css({"z-index":0,position:"absolute"});t.append(i),console.log(e,t,this);var r=document.querySelector("#bubble-gradient"),a=r.getContext("2d"),l=r.width,c=r.height;a.clearRect(0,0,l,c),a.fillStyle="#EEEEEE",a.fillRect(0,0,l,c);var s=function(e,t,n){this.x=e,this.y=t,this.radius=0,this.angle=0,this.full=n};s.prototype.grow=function(){return a.beginPath(),this.radius=this.full*Math.abs(Math.sin(this.angle)),a.arc(l-this.x,this.y,this.radius,0,2*Math.PI,!1),a.closePath(),a.fillStyle="#006699",a.fill(),this.angle+=.01,!(this.radius<this.full)};var u,d,f,m,h,p,g;u=d=f=m=0,h=10,p=c/5,g=c/5;var v=setInterval(function(){var e=new s(u,d,l/5),t=setInterval(function(){e.grow()&&clearInterval(t)},1);u>=l&&d>=c?(console.log("stopping"),clearInterval(v)):u<=0||d>=c?(f<l?(p-=5,f+=p):m+=g,d=m,u=f):(u-=p,d+=g)},h)}}}]),portfolio.directive("animejsBanner",["$q","landingService",function(e,t){return{restrict:"AE",templateUrl:"js/directives/animejs-banner/animejs-banner.html",controller:"PortfolioController",transclude:!0,link:function(e,n,o,i){n[0].querySelector("#loading-squares");t.canShowBox().then(function(){document.getElementById("box-container").className+="show-box",anime({targets:"#Bsvg path",strokeDashoffset:{easing:"easeInExpo",duration:500,value:function(e){var t=e.getTotalLength();return e.setAttribute("stroke-dasharray",t),[-t,0]}},stroke:{value:function(e,t){return"rgb("+2*t+","+8*t+","+12*t+")"},easing:"linear",duration:222},strokeWidth:{value:8,easing:"linear",delay:function(e,t){return 222+22*t},duration:222},opacity:{value:[0,1],duration:250,delay:250,easing:"linear"},delay:function(e,t){return 30*t},duration:1200,easing:"easeOutExpo",loop:!1,direction:"alternate",update:function(e){},complete:function(){t.animatedB()}})}),t.animatedB()}}}]),portfolio.directive("animejsExplosion",["$q","landingService","$timeout",function(e,t,n){return{restrict:"AE",template:'<canvas id="animejs-explosion"></canvas>',controller:"PortfolioController",link:function(e,o,i,r){t.canAnimateExplosion().then(function(){n(function(){function e(e){i();var n=p.indexOf(e);n>-1&&p.splice(n,1),t.animatedExplosion()}function n(e,t){var n=Math.max(e-0,d-e),o=Math.max(t-0,u-t);return Math.sqrt(Math.pow(n,2)+Math.pow(o,2))}function o(){document.addEventListener("touchstart",r),document.addEventListener("mousedown",r)}function i(){document.removeEventListener("touchstart",r),document.removeEventListener("mousedown",r)}function r(t){t.touches&&(t.preventDefault(),t=t.touches[0]);for(var o="#3cf0ff",i=n(t.pageX,t.pageY),r=Math.min(200,.4*d),a=750,l=new g({x:t.pageX,y:t.pageY,r:0,fill:"#18212D"}),c=anime({targets:l,r:i,duration:Math.max(i/2,a),easing:"easeOutQuart",complete:function(){h=l.fill,e(c)}}),s=new g({x:t.pageX,y:t.pageY,r:0,fill:"#3cf0ff",stroke:{width:3,color:"#3cf0ff"},opacity:1}),u=anime({targets:s,r:r,opacity:0,easing:"easeOutExpo",duration:900,complete:e}),f=[],m=0;m<32;m++){var v=new g({x:t.pageX,y:t.pageY,fill:o,r:anime.random(24,48)});f.push(v)}var y=anime({targets:f,x:function(e){return e.x+anime.random(r,-r)},y:function(e){return e.y+anime.random(1.15*r,1.15*-r)},r:0,easing:"easeOutExpo",duration:anime.random(1e3,1300),complete:e});p.push(c,u,y)}function a(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function l(){function e(){clearTimeout(t),document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}var t=setTimeout(function(){s(d/2,u/2)},0);document.addEventListener("mousedown",e),document.addEventListener("touchstart",e)}function c(){setTimeout(function(){s(anime.random(.2*d,.8*d),anime.random(.2*u,.8*u)),c()},anime.random(200,900))}function s(e,t){var n=new Event("mousedown");n.pageX=e,n.pageY=t,document.dispatchEvent(n)}var u,d,f=document.getElementById("animejs-explosion"),m=f.getContext("2d"),h="transparent",p=[],g=function(e){a(this,e)};g.prototype.draw=function(){m.globalAlpha=this.opacity||1,m.beginPath(),m.arc(this.x,this.y,this.r,0,2*Math.PI,!1),this.stroke&&(m.strokeStyle=this.stroke.color,m.lineWidth=this.stroke.width,m.stroke()),this.fill&&(m.fillStyle=this.fill,m.fill()),m.closePath(),m.globalAlpha=1};var v=(anime({duration:3825,update:function(e){m.fillStyle=h,m.fillRect(0,0,d,u),p.forEach(function(e){e.animatables.forEach(function(e){e.target.draw()})})}}),function(){d=window.innerWidth,u=window.innerHeight,f.width=d*devicePixelRatio,f.height=u*devicePixelRatio,m.scale(devicePixelRatio,devicePixelRatio)});!function(){v(),window.CP&&(window.CP.PenTimer.MAX_TIME_IN_LOOP_WO_EXIT=6e3),window.addEventListener("resize",v),o(),window.location.pathname.match(/fullcpgrid/)&&c(),l()}()},0)})}}}]),portfolio.directive("landingContent",["$timeout","landingService",function(e,t){return t.animatedCard(),{restrict:"AE",templateUrl:"js/directives/landing-content/landing-content.html",scope:!1,link:function(n,o,i,r){var a=o[0].querySelector("h1"),l=o[0].querySelector("p");t.canAnimateCard().then(function(){a.style.display="block",e(function(){n.showLandingContent=!0,angular.element(document.getElementById("action-button")).toggleClass("show-action-button")});var o=!1;anime({targets:a,delay:222,translateY:{value:["4.2em","0em"],duration:1888,direction:"normal",delay:2e3},fontSize:{value:["2em","1.2em"],duration:1888,direction:"normal",delay:2e3},update:function(e){0==o&&e.progress>50&&(o=!0,l.style.display="block",anime({targets:l,delay:222,opacity:{value:[0,1],duration:888},complete:function(){t.animatedCard()}}))}}),t.canAnimateControls().then(function(){e(function(){document.getElementById("side-controls").style.opacity=1,document.querySelector("#side-controls a:last-child").style.transform="scale(1)",document.querySelector("#side-controls a:last-child").style.animation="pulse .8s infinite alternate"},888)})})}}}]),portfolio.directive("card",["$drag","$touch","projectsService",function(e,t,n){return{restrict:"C",transclude:!0,template:'<div class="project"><div ng-transclude></div></div>',controller:"PortfolioController",link:function(o,i,r,a){var l,c,s,u;l=c=n.addCard(),u=0,s=i[0].style.zIndex,o.$watch(function(){return n.activeCard()},function(){u=0,u=l===n.activeCard()?0:n.activeCard()<l?l-n.activeCard():n.cardCount()-1-n.activeCard()+l,i[0].style.zIndex=2e3-u,c<0&&(c=n.cardCount()-1),c--,i[0].style.width=100-(c+1)+"%",i[0].style.top=n.cardSpreadInterval()*(c+1)+"px"}),e.bind(i,{transform:function(t,n,o){var i=e.TRANSLATE_BOTH(t,n,o),r=o.distanceX,a=o.startTransform,l=r<0?-1:1,c=l*Math.min(Math.abs(r)/700*30,30);return i.rotateZ=c+Math.round(a.rotateZ),i},start:function(e,t){t.stopPropagation(),a.scrollableToggle(!1)},move:function(e,t){t.stopPropagation(),i[0].style.opacity=1-Math.abs(e.distanceX)/e.rect.width,Math.abs(e.distanceX)>=e.rect.width/4?i.addClass("dismiss"):i.removeClass("dismiss")},cancel:function(){i.removeClass("dismiss")},end:function(e){i[0].style.opacity=1,a.scrollableToggle(!0),i.removeClass("dismiss"),Math.abs(e.distanceX)>=e.rect.width/4&&o.$apply(function(){n.next()}),e.reset()}}),t.bind(i,{end:function(e,t){if(Math.abs(e.total)<i[0].clientWidth/8){var n=i[0].querySelector(".flip-card");n.classList.toggle("flipped")}}})}}}]),portfolio.directive("skillz",["skillzService","$rootScope",function(e,t){return{controller:"PortfolioController",templateUrl:"js/directives/skillz/killz.html",link:function(e,t,n,o){}}}]),angular.bootstrap(document.documentElement,["portfolio"]);