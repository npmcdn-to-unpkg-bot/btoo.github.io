"use strict";function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var portfolio=angular.module("portfolio",["ngAnimate","ngSanitize","mobile-angular-ui","mobile-angular-ui.gestures.drag","mobile-angular-ui.gestures.touch","ngAnimate","ngSanitize"]).filter("byCategories",function(){return function(e,t){return void 0===t||0==t.length?e:e.filter(function(e){if(e.categories.some(function(e){return t.indexOf(e)>-1}))return e})}}).filter("byExperience",function(){return function(e,t,n){return e.filter(function(e){if(t||(t=0),n||(n=99),e.experience>=t&&e.experience<=n)return e})}}).filter("lowerCaseAndReplaceSpaces",function(){return function(e){return e.replace(/\s+/g,"-").toLowerCase()}});portfolio.factory("landingService",["$q",function(e){var t=e.defer(),n=e.defer(),r=e.defer(),o=([n.promise,r.promise],e.defer(),e.defer()),a=e.defer(),i=e.defer();return{renderedBox:function(){return t.resolve()},canShowBox:function(){return t.promise},animatedB:function(){return n.resolve()},canAnimateExplosion:function(){return n.promise},animatedExplosion:function(){return o.resolve()},canAnimateCard:function(){return o.promise},animatedCard:function(){return a.resolve()},canAnimateControls:function(){return a.promise},loadedProjects:function(){return i.resolve()},canBindProjectsCardsTransform:function(){return i.promise}}}]),portfolio.factory("networkMapService",["$http",function(e){function t(){function t(t,n){$("#networkmap").css({display:"inline-block"}),m=t,n=0,void 0!=i&&(i.selectAll("*").remove(),null!=document.getElementById("networkmapsvg")&&$("#networkmapsvg").remove()),i=d3.select("#project-modal").append("svg").attr("id","networkmapsvg").attr("width","100%").attr("height","100%").attr("background-color","white").call(f).attr("style","cursor:move").on("dblclick.zoom",null),l=i.append("g").attr("id","mapcontainer"),e.get("resources/json/network-map.json").then(function(e){function t(e){$("#rounds-list").empty();for(var t=document.getElementById("rounds-list"),n=0;n<=e;n++){console.log("ere");var r=document.createElement("li"),o=document.createElement("a"),a=document.createTextNode(thiscampaignDates[n]);r.setAttribute("class","round"),r.setAttribute("id","round-"+n),r.appendChild(o),o.appendChild(a),o.setAttribute("href","#"),o.setAttribute("class","round-link"),o.setAttribute("onclick","changeMatchTable('matchDate-"+n.toString()+"'); selectRound("+(e-n)+"); return false;"),t.appendChild(r)}}function a(){for(var e=0;e<p.links.length;e++)p.links[e].value<=n&&f.links.unshift(p.links[e])}var m=JSON.stringify(e.data),p=JSON.parse(m),f={nodes:[],links:[]};if(void 0!=p.error)return $("#maplegendholder").empty(),$("#mapdateholder").empty(),$("#networkmap").empty(),$("#networkmap").append('<span id="mapErrorMessage"><strong>'+p.error+"</strong></span>"),$("#roundsListButton").attr("disabled",""),$("#mapcontrols button").css("color","#666"),void console.log("d3 json call got error: "+p.error);$("#mapErrorMessage").remove(),$("#mapcontrols button").removeAttr("disabled"),$("#mapcontrols button").css("color","#333"),$("#roundsListButton").removeAttr("disabled");var h=Math.max.apply(Math,p.links.map(function(e){return e.value}));if(n=h,$("#roundsListButton").on("click",function(e){t(h)}),$(document).on("click","#rounds-list.dropdown-menu li a",function(){var e=$(this).text();$(this).parents("#selectDrawRound").find("#roundsListButton").html($(this).text()+"<span class='caret'></span>"),$("#matchListButton").html(e+"<span class='caret'></span>")}),a(),void 0!=p.error)$("#networkmap").empty(),$("#networkmap").append("<span><strong>"+p.error+"</strong></span>");else{var g;!function(){var e=function(e,n){function a(e,t){return w[e.index+","+t.index]}function m(){d3.event.defaultPrevented||(d=d3.select(this).node().__data__,0==x?($("#userinfoholder").empty(),$("#userinfoholder").append("<p>"+d.first_name+" "+d.last_name+"</p>"),$("#userinfoholder").append("<p>"+d.email+"</p>"),d.group&&$("#userinfoholder").append("<p>"+d.group+"</p>"),u.style("opacity",function(e){return a(e,d)|a(d,e)?1:.1}),c.style("opacity",function(e){return d.index==e.source.index|d.index==e.target.index?1:.1}),x=1):(u.style("opacity",1),c.style("opacity",1),$("#userinfoholder").empty(),x=0))}$("#matchTable tbody").is(":empty")&&void 0!=p.error?$("#matchTable thead").html("<tr><th>"+p.error+"</th></tr>"):$("#matchTable thead").empty(),$("networkmapsvg").length>0?($("#mapcontrols button").attr("disabled",""),$("#selectMatchRound").attr("disabled",""),$("#matchListButton").attr("disabled","")):($("#mapcontrols button").removeAttr("disabled"),$("#selectMatchRound").removeAttr("disabled"),$("#matchListButton").removeAttr("disabled")),n>=h?($("#next-round").attr("disabled","disabled"),$("#previous-round").removeAttr("disabled")):n<=0?($("#previous-round").attr("disabled","disabled"),$("#next-round").removeAttr("disabled")):($("#next-round").removeAttr("disabled"),$("#previous-round").removeAttr("disabled")),$("#playMap").removeAttr("disabled"),$("#pauseMap").removeAttr("disabled"),$("#selectMatchRound").removeAttr("disabled"),i.selectAll(".links").data(s.links()).remove(),i.selectAll(".nodes").data(s.nodes()).remove();var g,v=.5;g=n>0?v/n:.5;var y,b=-200;y=n>0?b-n*(b/h):-200;var k=200;s.nodes(p.nodes).links(e).linkStrength(function(e){return e.source_response>=1||e.target_response>=1?2*g:.2*g}).gravity(.08).distance(k).linkDistance(function(e){return e.source_response>=1||e.target_response>=1?50:null===e.source_response&&null===e.target_response?100:(e.source_response<=0||e.target_response<=0,100)}).charge(-200).friction(.9).size([r,o]).start(),c=l.data(s.links()).append("g").attr("class","links").selectAll(".link").data(e).enter().append("line").attr("class","link").attr("round",function(e){return e.value}).attr("connectednodes",function(e){return e.source.index+" "+e.target.index}).attr("stroke-width",function(e){return void 0==e.source.index||void 0==e.target.index?0:e.source_response>=1||e.target_response>=1?3:null===e.source_response&&null===e.target_response?1:e.source_response<=0||e.target_response<=0?2:1}).style("stroke",function(e){return e.source_response>=1||e.target_response>=1?"#84b750":null===e.source_response&&null===e.target_response?"ccc":e.source_response<=0||e.target_response<=0?"#e8335d":"#ccc"}),s.on("tick",t),u=l.data(s.nodes()).append("g").attr("class","nodes").selectAll(".node").data(p.nodes).enter().append("g").attr("class","node").attr("userid",function(e){return e.userid}).attr("index",function(e){return e.index}).call(s.drag).on("click",m),u.attr("xlink:href",function(e){return"image"in e?e.image:e.url}).append("circle").attr("r",10).style("fill","#1babab").attr("width",function(e){return"image"in e?32:16}).attr("height",function(e){return"image"in e?32:16}).on("mouseover",function(){d3.select(this).style("fill","#1babab").attr("style","cursor:pointer")}).on("mouseout",function(){d3.select(this).style("fill","#1babab")}).on("dblclick.zoom",null),u.append("text").attr("dx",15).attr("dy",".35em").attr("xlink:href",function(e){return e.image}).text(function(e){return e.first_name+" "+e.last_name.substring(0,1)+"."});for(var x=0,w={},S=0;S<p.nodes.length;S++)w[S+","+S]=1;f.links.forEach(function(e){w[e.source.index+","+e.target.index]=1})},t=function(e){c.attr("x1",function(e){return e.source.x}).attr("y1",function(e){return e.source.y}).attr("x2",function(e){return e.target.x}).attr("y2",function(e){return e.target.y}),u.attr("transform",function(e){return"translate("+e.x+","+e.y+")"})};e(f.links,n),$("input:checkbox[name=map-filter]").change(function(){f.links=[],a(),e(f.links,n)}),g=0}()}})}function n(){l.attr("transform","scale("+d3.event.scale+") translate("+d3.event.translate+")")}var r,o,a,i,l,s,c,u,m=0,p=0,f=d3.behavior.zoom().scaleExtent([.02,5]).on("zoom",n);r=Math.min(document.documentElement.clientWidth-42,800),o=Math.min(document.documentElement.clientHeight-42,800),s=d3.layout.force(),a=s.drag().on("dragstart",function(){d3.event.sourceEvent.stopPropagation()}),t(m,p)}return{renderSparkNetworkMap:function(){t()}}}]),portfolio.factory("projectsService",["$q","$http","$rootScope","landingService","$timeout","networkMapService","$templateCache","$sce","$templateRequest",function(e,t,n,r,o,a,i,l,s){var c=0,d=null;return{cardCount:function(){return c},activeCard:function(){return d},addCard:function(){var e=c++;return d=1===c?e:d,e},next:function(){d=d||0,d=d===c-1?0:d+1},prev:function(){d=d||0,d=0===d?c-1:d-1},cardSpreadInterval:function u(){var u=.05*document.querySelector(".cards-inner").clientHeight/(c-1);if(c>0)return u},showCardBackButtons:function(){var e=document.getElementById("card-back-buttons");if("flex"!=e){e.style.display="flex";var t=n.projects[d];0!=d&&e.querySelector("#visit-project-site").setAttribute("href",t.link.url);anime({targets:e,opacity:{value:[0,1],duration:2222,delay:222}}),anime({targets:e.querySelector(".card-back-button:first-child"),translateX:{value:["-8rem","0rem"],duration:2222},rotate:{value:[0,360],duration:2222},elasticity:222}),anime({targets:e.querySelector(".card-back-button:last-child"),translateX:{value:["8rem","0rem"],duration:2222},rotate:{value:[0,-360],duration:2222},elasticity:222}),anime({targets:e.querySelector(".card-back-button:not(:first-child):not(:last-child)"),translateY:{value:["-8rem","0rem"],duration:2222},elasticity:222})}},hideCardBackButtons:function(){var e=document.getElementById("card-back-buttons");anime({targets:e.querySelectorAll(".card-back-button"),opacity:{value:[1,0],duration:888},translateY:"-8em",delay:function(e,t){return 88*t},complete:function(t){e.style.display="none",e.querySelectorAll(".card-back-button").forEach(function(e){e.style.opacity=1})}})},emptyProjectModal:function(){var e=angular.element(document.querySelectorAll("#project-modal > *:not(#project-modal-close)"));e.remove()},renderProjectModal:function(){var e=n.projects[d];if("spark"===e.id)a.renderSparkNetworkMap();else if(e.preview){var t=l.getTrustedResourceUrl(e.preview),r=s(t);return r}}}}]),portfolio.factory("skillzService",["$http","$rootScope","landingService","$timeout","$q",function(e,t,n,r){return t.dummySkillzCategoriesList=[],e.get("resources/json/skillz.json").then(function(e){var n;t.skillz=e.data;for(var r=e.data.length-1;r>=0;r--)t.dummySkillzCategoriesList.push(e.data[r].categories);t.dummySkillzCategoriesList=[].concat(_toConsumableArray(new Set((n=[]).concat.apply(n,_toConsumableArray(t.dummySkillzCategoriesList)))))}),{dummySkillzCategoriesList:function(){}}}]),portfolio.controller("BoxController",["$scope","landingService","$http","$rootScope",function(e,t,n,r){var o=this;e.shown="front",t.canAnimateCard().then(function(){document.querySelector(".front.shown").classList+=" bg-dark"});var a=Math.max(document.documentElement.clientWidth,window.innerWidth||0)-4,i=Math.max(document.documentElement.clientHeight,window.innerHeight||0)-4,l=document.getElementById("box-container").style;l.width=a+"px",l.height=i+"px";var s=a/2+"px",c=document.getElementById("box");c.style.transform="translateZ(-"+s+") rotateY(0deg)";var d=["front","right","back","left"];this.sides=d;for(var u=d.length-1;u>=0;u--){var m;switch(d[u]){case"front":m="0deg";break;case"right":m="90deg";break;case"back":m="180deg";break;case"left":m="-90deg"}var p=document.querySelector("#box ."+d[u]);p.style.transform="rotateY("+m+") translateZ("+s+")",p.style.width=a+"px",p.style.height=i+"px"}t.renderedBox(),o.showSide=function(o){document.querySelector("#side-controls a:last-child").style.animationName="none",document.getElementById("project-modal-bg").classList.remove("modal-rendered");var a=document.querySelector("#side-controls a:first-child"),i=document.querySelector("#side-controls a:last-child");a.style.opacity="1",i.style.opacity="1",document.getElementById("side-controls").style.opacity=.42;var l;switch(o){case"front":a.style.opacity=0,l="0deg";break;case"right":l="-90deg";break;case"back":l="-180deg",r.projects||n.get("resources/json/projects.json").then(function(e){r.projects=e.data,t.loadedProjects()}),document.getElementById("project-modal-bg").classList.add("modal-rendered");break;case"left":i.style.opacity=0,l="-270deg"}e.shown=o,c.style.transform="translateZ(-"+s+") rotateY("+l+")"}}]),portfolio.controller("PortfolioController",["$scope","$http","$window","$timeout","projectsService","landingService","skillzService","$location","$anchorScroll","$document","$rootScope","$compile",function(e,t,n,r,o,a,i,l,s,c,d,u){e.showLandingContent=!1,e.scrollable="unscrollable",this.scrollableToggle=function(t){e.scrollable=t?"scrollable":"unscrollable"},this.closeActionMenu=function(){e.actionMenuOpened=!1,document.querySelector("#action-button input").checked=!1,document.getElementById("box-container").classList.remove("open-menu-blur"),document.querySelector("#side-controls a:first-child").style.left=0,document.querySelector("#side-controls a:last-child").style.right=0},e.actionMenuOpened=!1,e.skillzOrderProperty="skill",e.skillzOrderReverse=!1,e.skillzFilterCategories=[],e.toggleCategoryFilter=function(t){e.skillzFilterCategories.indexOf(t)>-1?e.skillzFilterCategories.splice(e.skillzFilterCategories.indexOf(t),1):e.skillzFilterCategories.push(t)},e.skillzFilterExperienceMin=0,e.skillzFilterExperienceMax=99,e.flipToFront=function(){o.hideCardBackButtons();var e=document.querySelectorAll(".cards-inner > .card"),t=e[o.activeCard()];t.querySelector(".flip-card").classList.remove("flipped"),r(function(){t.querySelector(".flip-card").classList.remove("flipped-complete")},1e3)},e.showProjectModal=function(){document.getElementById("project-modal-bg").classList.toggle("modal-shown");var t=o.renderProjectModal();t&&t.then(function(t){var n=angular.element(document.getElementById("project-modal"));u(n.html(t).contents())(e)},function(){console.log("an error occured")})},e.closeProjectModal=function(){document.getElementById("project-modal-bg").classList.remove("modal-shown"),r(function(){o.emptyProjectModal()},888)},e.projectPreview=""}]),portfolio.directive("actionMenuButton",["$timeout",function(e){return{controller:"PortfolioController",link:function(t,n,r,o){var a=document.getElementById("box-container");n.bind("click",function(){e(function(){o.actionMenuOpened=!!n[0].querySelector("input").checked,o.actionMenuOpened?(a.classList.contains("open-menu-blur")||(a.classList.add("open-menu-blur"),n[0].classList.add("open")),document.querySelector("#side-controls a:first-child").style.left="-88vw",document.querySelector("#side-controls a:last-child").style.right="-88vw"):o.actionMenuOpened||(a.classList.contains("open-menu-blur")&&(a.classList.remove("open-menu-blur"),n[0].classList.remove("open")),document.querySelector("#side-controls a:first-child").style.left=0,document.querySelector("#side-controls a:last-child").style.right=0)})})}}}]),portfolio.directive("actionMenuItemButton",["$timeout",function(e){return{link:function(t,n,r){n.bind("click",function(){e(function(){t.actionMenuOpened=!1})})}}}]),portfolio.directive("animejsBanner",["$q","landingService","$timeout",function(e,t,n){return{restrict:"AE",templateUrl:"js/directives/animejs-banner/animejs-banner.html",controller:"PortfolioController",transclude:!0,link:function(e,r,o,a){r[0].querySelector("#loading-squares");t.canShowBox().then(function(){n(function(){document.getElementById("box-container").className+="show-box",anime({targets:"#Bsvg path",strokeDashoffset:{easing:"easeInExpo",duration:500,value:function(e){var t=e.getTotalLength();return e.setAttribute("stroke-dasharray",t),[-t,0]}},stroke:{value:function(e,t){return"rgb("+2*t+","+8*t+","+12*t+")"},easing:"linear",duration:222},strokeWidth:{value:8,easing:"linear",delay:function(e,t){return 222+22*t},duration:222},opacity:{value:[0,1],duration:250,delay:250,easing:"linear"},delay:function(e,t){return 30*t},duration:1200,easing:"easeOutExpo",loop:!1,direction:"alternate",update:function(e){},complete:function(){t.animatedB()}})},888)})}}}]),portfolio.directive("animejsExplosion",["$q","landingService","$timeout",function(e,t,n){return{restrict:"AE",template:'<canvas id="animejs-explosion"></canvas>',controller:"PortfolioController",link:function(e,r,o,a){t.canAnimateExplosion().then(function(){n(function(){function e(e){o();var n=h.indexOf(e);n>-1&&h.splice(n,1),t.animatedExplosion()}function n(e,t){var n=Math.max(e-0,u-e),r=Math.max(t-0,d-t);return Math.sqrt(Math.pow(n,2)+Math.pow(r,2))}function r(){document.addEventListener("touchstart",a),document.addEventListener("mousedown",a)}function o(){document.removeEventListener("touchstart",a),document.removeEventListener("mousedown",a)}function a(t){t.touches&&(t.preventDefault(),t=t.touches[0]);for(var r="#3cf0ff",o=n(t.pageX,t.pageY),a=Math.min(200,.4*u),i=750,l=new g({x:t.pageX,y:t.pageY,r:0,fill:"#18212D"}),s=anime({targets:l,r:o,duration:Math.max(o/2,i),easing:"easeOutQuart",complete:function(){f=l.fill,e(s)}}),c=new g({x:t.pageX,y:t.pageY,r:0,fill:"#3cf0ff",stroke:{width:3,color:"#3cf0ff"},opacity:1}),d=anime({targets:c,r:a,opacity:0,easing:"easeOutExpo",duration:900,complete:e}),m=[],p=0;p<32;p++){var v=new g({x:t.pageX,y:t.pageY,fill:r,r:anime.random(24,48)});m.push(v)}var y=anime({targets:m,x:function(e){return e.x+anime.random(a,-a)},y:function(e){return e.y+anime.random(1.15*a,1.15*-a)},r:0,easing:"easeOutExpo",duration:anime.random(1e3,1300),complete:e});h.push(s,d,y)}function i(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function l(){function e(){clearTimeout(t),document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}var t=setTimeout(function(){c(u/2,d/2)},0);document.addEventListener("mousedown",e),document.addEventListener("touchstart",e)}function s(){setTimeout(function(){c(anime.random(.2*u,.8*u),anime.random(.2*d,.8*d)),s()},anime.random(200,900))}function c(e,t){var n=new Event("mousedown");n.pageX=e,n.pageY=t,document.dispatchEvent(n)}var d,u,m=document.getElementById("animejs-explosion"),p=m.getContext("2d"),f="transparent",h=[],g=function(e){i(this,e)};g.prototype.draw=function(){p.globalAlpha=this.opacity||1,p.beginPath(),p.arc(this.x,this.y,this.r,0,2*Math.PI,!1),this.stroke&&(p.strokeStyle=this.stroke.color,p.lineWidth=this.stroke.width,p.stroke()),this.fill&&(p.fillStyle=this.fill,p.fill()),p.closePath(),p.globalAlpha=1};var v=(anime({duration:3825,update:function(e){p.fillStyle=f,p.fillRect(0,0,u,d),h.forEach(function(e){e.animatables.forEach(function(e){e.target.draw()})})}}),function(){u=window.innerWidth,d=window.innerHeight,m.width=u*devicePixelRatio,m.height=d*devicePixelRatio,p.scale(devicePixelRatio,devicePixelRatio)});!function(){v(),window.CP&&(window.CP.PenTimer.MAX_TIME_IN_LOOP_WO_EXIT=6e3),window.addEventListener("resize",v),r(),window.location.pathname.match(/fullcpgrid/)&&s(),l()}()},0)})}}}]),portfolio.directive("landingContent",["$timeout","landingService",function(e,t){return{restrict:"AE",templateUrl:"js/directives/landing-content/landing-content.html",scope:!1,link:function(n,r,o,a){var i=r[0].querySelector("h1"),l=r[0].querySelector("p");t.canAnimateCard().then(function(){i.style.display="block",e(function(){n.showLandingContent=!0,angular.element(document.getElementById("action-button")).toggleClass("show-action-button")});var r=(document.getElementById("landing-card"),!1);anime({targets:i,translateY:{value:["15px","-15px"],duration:1e3,direction:"normal",delay:1100},fontSize:{value:["42px","30px"],duration:1e3,direction:"normal",delay:1100},opacity:{value:[0,1],duration:345,easing:"linear"},update:function(e){0==r&&e.progress>50&&(r=!0,l.style.display="block",anime({targets:l,translateY:{value:[88,0],duration:888},opacity:{value:[0,1],duration:888},elasticity:222,complete:function(){t.animatedCard()}}))}}),t.canAnimateControls().then(function(){e(function(){document.getElementById("side-controls").style.opacity=1,document.querySelector("#side-controls a:last-child").style.transform="scale(1)",document.querySelector("#side-controls a:last-child").style.animation="pulse .8s infinite alternate"},888)})})}}}]),portfolio.directive("bubbleGradient",[function(){return{restrict:"AE",link:function(e,t,n,r){var o=$('<canvas id="bubble-gradient" width="'+t.width()+'" height="'+t.height()+'"></canvas>').css({"z-index":0,position:"absolute"});t.append(o),console.log(e,t,this);var a=document.querySelector("#bubble-gradient"),i=a.getContext("2d"),l=a.width,s=a.height;i.clearRect(0,0,l,s),i.fillStyle="#EEEEEE",i.fillRect(0,0,l,s);var c=function(e,t,n){this.x=e,this.y=t,this.radius=0,this.angle=0,this.full=n};c.prototype.grow=function(){return i.beginPath(),this.radius=this.full*Math.abs(Math.sin(this.angle)),i.arc(l-this.x,this.y,this.radius,0,2*Math.PI,!1),i.closePath(),i.fillStyle="#006699",i.fill(),this.angle+=.01,!(this.radius<this.full)};var d,u,m,p,f,h,g;d=u=m=p=0,f=10,h=s/5,g=s/5;var v=setInterval(function(){var e=new c(d,u,l/5),t=setInterval(function(){e.grow()&&clearInterval(t)},1);d>=l&&u>=s?(console.log("stopping"),clearInterval(v)):d<=0||u>=s?(m<l?(h-=5,m+=h):p+=g,u=p,d=m):(d-=h,u+=g)},f)}}}]),portfolio.directive("card",["$drag","$touch","projectsService","landingService","$timeout","$rootScope",function(e,t,n,r,o,a){return{restrict:"C",transclude:!0,template:'<div class="project"><div ng-transclude></div></div>',controller:"PortfolioController",link:function(a,i,l,s){function c(){return!!i[0].querySelector(".flip-card").classList.contains("flipped")}var d,u,m,p;d=u=n.addCard(),p=0,m=i[0].style.zIndex,a.$watch(function(){return n.activeCard()},function(){p=0,p=d===n.activeCard()?0:n.activeCard()<d?d-n.activeCard():n.cardCount()-1-n.activeCard()+d,i[0].style.zIndex=2e3-p,u<0&&(u=n.cardCount()-1),u--,i[0].style.width=100-(u+1)+"%",i[0].style.top=n.cardSpreadInterval()*(u+1)+"px"}),r.canBindProjectsCardsTransform().then(function(){e.bind(i,{transform:function(t,r,o){if(c()){var a=t[0].querySelector(".card-back > div");return a.scrollTop+=-o.stepY,e.NULL_TRANSFORM(t,r,o)}if(d==n.activeCard()){var i=e.TRANSLATE_BOTH(t,r,o),l=o.distanceX,s=o.startTransform,u=l<0?-1:1,m=u*Math.min(Math.abs(l)/700*30,30);return i.rotateZ=m+Math.round(s.rotateZ),i}},start:function(e,t){t.stopPropagation(),s.scrollableToggle(!1)},move:function(e,t){c()||d!=n.activeCard()||(t.stopPropagation(),i[0].style.opacity=1-Math.abs(e.distanceX)/e.rect.width,Math.abs(e.distanceX)>=e.rect.width/4?i.addClass("dismiss"):i.removeClass("dismiss"))},cancel:function(){i.removeClass("dismiss")},end:function(e){c()||d!=n.activeCard()||(i[0].style.opacity=1,s.scrollableToggle(!0),i.removeClass("dismiss"),Math.abs(e.distanceX)>=e.rect.width/4&&a.$apply(function(){n.next()}),e.reset())}}),t.bind(i,{end:function(e,t){if(!c()&&d==n.activeCard()&&Math.abs(e.total)<i[0].clientWidth/8){n.showCardBackButtons();var r=i[0].querySelector(".flip-card");r.classList.toggle("flipped"),r.classList.contains("flipped-complete")?r.classList.toggle("flipped-complete"):o(function(){r.classList.toggle("flipped-complete")},1e3)}}})})}}}]),portfolio.directive("skillz",["skillzService","$rootScope",function(e,t){return{controller:"PortfolioController",templateUrl:"js/directives/skillz/killz.html",link:function(e,t,n,r){}}}]),angular.bootstrap(document.documentElement,["portfolio"]);