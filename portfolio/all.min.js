"use strict";var portfolio=angular.module("portfolio",["ngAnimate","ngSanitize","hmTouchEvents"]);portfolio.factory("landingService",["$q",function(t){var e=t.defer(),n=t.defer(),i=[e.promise,n.promise],r=t.defer();return{animatedB:function(){return e.resolve()},createdSquares:function(){return n.resolve()},canAnimateSquares:function(){return t.all(i)},animatedSquares:function(){return r.resolve()},canAnimateCard:function(){return r.promise}}}]),portfolio.controller("PortfolioController",["$scope",function(t){var e=this,n=moment("1993-08-24 00:00").startOf("minute");this.ageyears=moment().diff(n,"years"),this.agemonths=moment().subtract(this.ageyears,"years").diff(n,"months"),this.ageseconds=moment().subtract(this.ageyears,"years").subtract(this.agemonths,"months").diff(n,"seconds"),setInterval(function(){return t.$apply(function(){return e.ageseconds++})},1e3),this.initialScroll=function(){t.scrollable="scrollable";var e=0;e=$("#intro").offset().top-120+$("#intro")[0].offsetHeight-$(window).height()>$("#intro").offset().top?$("#intro").offset().top-120:$("#intro").offset().top+$("#intro")[0].offsetHeight-$(window).height(),$("html, body").stop().animate({scrollTop:e},800)},t.showLandingContent=!1,t.scrollable="unscrollable"}]),portfolio.directive("animejsBanner",["$q","landingService",function(t,e){return{restrict:"AE",templateUrl:"js/directives/animejs-banner/animejs-banner.html",controller:"PortfolioController",link:function(t,n,i,r){n[0].querySelector("#loading-squares");anime({targets:"#Bsvg path",strokeDashoffset:{easing:"easeInOutExpo",duration:500,value:function(t){var e=t.getTotalLength();return t.setAttribute("stroke-dasharray",e),[-e,0]}},stroke:{value:function(t,e){return"rgb("+2*e+","+8*e+","+12*e+")"},easing:"linear",duration:222},strokeWidth:{value:8,easing:"linear",delay:function(t,e){return 600+8*e},duration:222},delay:function(t,e){return 30*e},duration:1200,easing:"easeOutExpo",loop:!1,direction:"alternate",update:function(t){1==t.reversed&&e.animatedB()},complete:function(){}});var o,a,s,l,c,u,d=n[0].querySelector("#squares");o=a=s=l=0;var f=Math.min(Math.ceil(n.height()/3.8),122);c=u=f;do d.innerHTML+='\n\t\t\t\t\t\t\t\t\t\t\t\t<article style="width:'+c+"px;height:"+u+"px;top:"+a+"px;right:"+o+'px">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div></div>\n\t\t\t\t\t\t\t\t\t\t\t\t</article>\n\t\t\t\t\t\t\t\t\t\t\t',o<c||a>n.height()-u?(s<n.width()?s+=c:l+=u,a=l,o=s):(o-=c,a+=u);while(o<n.width()||a<n.height());$("#squares").css("display","block"),e.createdSquares(),e.canAnimateSquares().then(function(){anime({targets:"#squares div",rotate:{value:180,duration:888,easing:"easeInOutQuad"},scale:{value:[0,1],duration:888,easing:"easeInOutExpo"},loop:!1,direction:"normal",borderRadius:{value:0,duration:1222,easing:"easeInOutCirc"},backgroundColor:"#18212D",delay:function(t,e,n){var i=888;return e*(i/n)},update:function(t){t.progress>75&&e.animatedSquares()},complete:function(){d.className+="bg-dark",n.find("article").hide()}})})}}}]),portfolio.directive("bubbleGradient",[function(){return{restrict:"AE",link:function(t,e,n,i){var r=$('<canvas id="bubble-gradient" width="'+e.width()+'" height="'+e.height()+'"></canvas>').css({"z-index":0,position:"absolute"});e.append(r),console.log(t,e,this);var o=document.querySelector("#bubble-gradient"),a=o.getContext("2d"),s=o.width,l=o.height;a.clearRect(0,0,s,l),a.fillStyle="#EEEEEE",a.fillRect(0,0,s,l);var c=function(t,e,n){this.x=t,this.y=e,this.radius=0,this.angle=0,this.full=n};c.prototype.grow=function(){return a.beginPath(),this.radius=this.full*Math.abs(Math.sin(this.angle)),a.arc(s-this.x,this.y,this.radius,0,2*Math.PI,!1),a.closePath(),a.fillStyle="#006699",a.fill(),this.angle+=.01,!(this.radius<this.full)};var u,d,f,h,g,m,p;u=d=f=h=0,g=10,m=l/5,p=l/5;var v=setInterval(function(){var t=new c(u,d,s/5),e=setInterval(function(){t.grow()&&clearInterval(e)},1);u>=s&&d>=l?(console.log("stopping"),clearInterval(v)):u<=0||d>=l?(f<s?(m-=5,f+=m):h+=p,d=h,u=f):(u-=m,d+=p)},g)}}}]),portfolio.directive("hmDir",["$timeout",function(t){return{restrict:"AE",controller:"PortfolioController",link:function(e,n,i,r){var o,a;t(function(){o=document.getElementsByClassName("swipable")[0].style.top,a=document.getElementsByClassName("swipable")[0].style.left,o=parseInt(o,10),a=parseInt(a,10),console.log(o,a)}),e.onHammer=function(t){t.target===n[0].children[0]&&n.children().css({left:a+t.deltaX+"px",top:o+t.deltaY+"px"})},e.endHammer=function(t){o=document.getElementsByClassName("swipable")[0].style.top,a=document.getElementsByClassName("swipable")[0].style.left,o=parseInt(o,10),a=parseInt(a,10),console.log(o,a)}}}}]),portfolio.directive("landingContent",["landingService",function(t){return{restrict:"AE",templateUrl:"js/directives/landing-content/landing-content.html",scope:!1,link:function(e,n,i,r){t.canAnimateCard().then(function(){console.log("finished animating squares, so now animate the card"),e.showLandingContent=!0})}}}]);